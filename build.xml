<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project AngryPigs with Jar-in-Jar Loader">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <target name="init">
      <mkdir dir="bin" />
      <taskdef resource="scala/tools/ant/antlib.xml">
        <classpath>
          <pathelement location="lib/scala-2.10.0/scala-reflect.jar" />
          <pathelement location="lib/scala-2.10.0/scala-compiler.jar" />
          <pathelement location="lib/scala-2.10.0/scala-library.jar" />
        </classpath>
      </taskdef>
    </target>
    <target name="create_run_jar" depends="init">
       <scalac 
            srcdir="src/AngryPigs"
            destdir="bin"
            classpath="lib/scala-2.10.0/scala-library.jar:lib/clojure-1.4.0/clojure-1.4.0.jar"
            extdirs="lib/lwjgl-2.8.3/jar"
            addparams="-optimise -Ywarn-value-discard -Ywarn-dead-code -Xlint -deprecation -feature">
            <include name="*.scala" />
        </scalac>
        <javac
            srcdir="src/AngryPigs"
            destdir="bin">
            <include name="ScalaRunner.java" />
        </javac>
        <jar destfile="AngryPigs.jar">
	            <manifest>
                <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
                <attribute name="Rsrc-Main-Class" value="AngryPigs.ScalaRunner"/>
                <attribute name="Class-Path" value="."/>
                <attribute name="Rsrc-Class-Path" value="./ clojure-1.4.0.jar lwjgl_util.jar lwjgl.jar scala-library.jar"/>
            </manifest>
            <zipfileset src="jar-in-jar-loader.zip"/>
            <fileset dir="bin" />
            <zipfileset dir="lib/clojure-1.4.0" includes="clojure-1.4.0.jar" />
            <zipfileset dir="lib/scala-2.10.0" includes="scala-library.jar" />
            <zipfileset dir="lib/lwjgl-2.8.3/jar" includes="lwjgl.jar" />
            <zipfileset dir="lib/lwjgl-2.8.3/jar" includes="lwjgl_util.jar" />
            <zipfileset dir="src/AngryPigs" includes="*.clj" />
        </jar>
    </target>
</project>
